<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="description" content="åº­é™¢æ·±æ·±æ·±å‡ è®¸">



<title>Anomalibå®‰è£…å’Œä½¿ç”¨ | æ¸¸å›­ä¸å€¼</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">æ¸¸å›­ä¸å€¼</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">æ¸¸å›­ä¸å€¼</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Anomalibå®‰è£…å’Œä½¿ç”¨</h1>
            
                <div class="post-meta">
                    

                    
                        <span class="post-time">
                        Date: <a href="#">2023-11-19&nbsp;&nbsp;15:21:37</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <p>å’Œyolov5ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨æ•°æ®é›†ä¸å¹³è¡¡çš„æƒ…å†µä¸‹è¿›è¡Œç¼ºé™·æ£€æµ‹ã€‚</p>
<h3 id="ä¸‹è½½å’Œç¯å¢ƒå®‰è£…"><a href="#ä¸‹è½½å’Œç¯å¢ƒå®‰è£…" class="headerlink" title="ä¸‹è½½å’Œç¯å¢ƒå®‰è£…"></a>ä¸‹è½½å’Œç¯å¢ƒå®‰è£…</h3><p>å»GitHubä¸Šä¸‹è½½Anomalibçš„ä»£ç ï¼Œè§£å‹åˆ°ä»»æ„æ–‡ä»¶å¤¹é‡Œï¼Œæ–‡ä»¶åé»˜è®¤æ˜¯anomalib-mainï¼Œè™šæ‹Ÿç¯å¢ƒå¯ä»¥å•ç‹¬åœ¨åˆ«çš„åœ°æ–¹ä¹Ÿå¯ä»¥åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹</p>
<p>å¯¹äºè™šæ‹Ÿç¯å¢ƒçš„å®‰è£…ï¼Œè¿™é‡Œä¸ä½¿ç”¨anacondaï¼Œå°½ç®¡å¾ˆå¤šäººæ¨è</p>
<p>å› ä¸ºæ²¡æœ‰condaæ¥åˆ›å»ºä¸åŒç‰ˆæœ¬çš„pythonç¯å¢ƒï¼Œæ‰€ä»¥è¿™é‡Œçš„pythonè¦æ±‚3.10æˆ–è€…ä»¥ä¸‹ç‰ˆæœ¬ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œè¿‡é«˜çš„ç‰ˆæœ¬ä¼šæœ‰ä¾èµ–ä¸æ”¯æŒå¯¼è‡´å®‰è£…å¤±è´¥ã€‚</p>
<p>åœ¨ç»ˆç«¯cdåˆ°ä½ æƒ³è¦åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ</p>
<p><code>python -m venv anomalibenv</code></p>
<p>å…¶ä¸­anomalibenvæ˜¯è™šæ‹Ÿç¯å¢ƒåç§°ï¼Œå¯è‡ªå®šä¹‰</p>
<p>åˆ›å»ºå®Œæˆåï¼Œæ‰§è¡Œè™šæ‹Ÿç¯å¢ƒç›®å½•ä¸‹çš„ <code>/Scripts/activate</code> ä»¥æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</p>
<p>æœ€åcdåˆ°ä¸‹è½½çš„anomalib-mainæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œ</p>
<p><code>pip install -e .</code></p>
<p>ä»¥å®‰è£…ä¾èµ–ï¼Œæœ€åæœ‰ä¸ªç‚¹ä¹Ÿä¸è¦æ¼æ‰“</p>
<p>ç„¶åè¿˜è¦é¢å¤–å®‰è£…ä¸¤ä¸ªåŒ…ï¼Œåˆ†åˆ«æ‰§è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install openvino</span><br><span class="line">pip install wandb</span><br><span class="line">pip install onnx</span><br></pre></td></tr></table></figure>

<p>å¦å¤–ï¼Œé»˜è®¤ä¸‹è½½çš„ä¾èµ–ä¸­torchæ˜¯ä¸å¸¦cudaçš„ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨GPUèµ„æºï¼Œéœ€è¦è‡ªè¡Œå»pytorchå®˜ç½‘ä¸‹è½½åˆé€‚çš„ç‰ˆæœ¬ã€‚</p>
<h3 id="pipé—®é¢˜"><a href="#pipé—®é¢˜" class="headerlink" title="pipé—®é¢˜"></a>pipé—®é¢˜</h3><p>pipä¸‹è½½ä½¿ç”¨é»˜è®¤æºé€Ÿåº¦å¾ˆæ…¢çš„è¯å¯ä»¥å‚è€ƒä¸‹é¢çš„æ–¹æ³•ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/kantin_y/article/details/121087117">pipæ›´æ¢å›½å†…æºä»¥åŠå®˜æ–¹æº-CSDNåšå®¢</a></p>
<p>è¿™é‡Œå»ºè®®ä½¿ç”¨æ–¹æ³•4:winæ°¸ä¹…æ¢æº</p>
<h3 id="å†…ç½®æ•°æ®é›†"><a href="#å†…ç½®æ•°æ®é›†" class="headerlink" title="å†…ç½®æ•°æ®é›†"></a>å†…ç½®æ•°æ®é›†</h3><p>æ‰§è¡Œ</p>
<p><code>python tools/train.py</code></p>
<p>ä»¥è¿è¡Œè‡ªå¸¦æ•°æ®é›†ï¼Œä½†è¿™é‡Œå¹¶ä¸æ¨èï¼Œå› æ­¤è¿™ä¸€æ­¥ç›´æ¥ä¸åš</p>
<p>ä¸åƒyoloçš„coco128æ•°æ®é›†ï¼Œè¿™é‡Œè‡ªå¸¦çš„æ•°æ®é›†éœ€è¦ä¸‹è½½é«˜è¾¾5G+çš„æ•°æ®ï¼Œæ‰€ä»¥ç›´æ¥è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œè‡ªåˆ¶æ•°æ®é›†ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä½¿ç”¨æ–¹æ³•</p>
<h3 id="åˆ¶ä½œè‡ªå®šä¹‰æ•°æ®é›†"><a href="#åˆ¶ä½œè‡ªå®šä¹‰æ•°æ®é›†" class="headerlink" title="åˆ¶ä½œè‡ªå®šä¹‰æ•°æ®é›†"></a>åˆ¶ä½œè‡ªå®šä¹‰æ•°æ®é›†</h3><p>ä¸‹é¢çš„å›¾ç‰‡ç›´æ¥å€Ÿç”¨å®éªŒå®¤å¸ˆå…„çš„å›¾ <del>ç»ä¸æ˜¯å› ä¸ºæ‡’è‡ªå·±ä¸æˆª</del></p>
<p>è¿›å…¥<code>anomalib-main\datasets</code>ä¸‹åˆ›å»ºç”¨äºæ”¾ç½®è‡ªåˆ¶æ•°æ®é›†çš„æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œä»¥<code>LeatherSet</code>ä¸ºä¾‹ã€‚</p>
<p><img src="231119-1.png"></p>
<p>ç„¶ååœ¨<code>LeatherSet</code>æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸‰ä¸ªå­æ–‡ä»¶ï¼Œ<code>abnormal</code>ï¼ˆç”¨äºæ”¾ç½®è´Ÿæ ·æœ¬ï¼Œå³å¼‚å¸¸æ ·æœ¬ï¼‰ã€<code>normal</code>ï¼ˆç”¨äºæ”¾ç½®æ­£æ ·æœ¬ï¼Œå³æ­£å¸¸æ ·æœ¬ï¼Œæ³¨æ„æ­£æ ·æœ¬å¿…é¡»è‡³å°‘10å¼ å›¾ç‰‡ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼‰ã€<code>patchcore</code>ï¼ˆè¯¥æ–‡ä»¶å¤¹ç”¨äºæ”¾ç½®configé…ç½®æ–‡ä»¶ï¼Œå…¶å®æ”¾åœ¨å“ªéƒ½å¯ä»¥ï¼Œå«ä»€ä¹ˆåå­—ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼‰ã€‚ä¸‹é¢æ–‡ä»¶å¤¹ä¸­æ­£è´Ÿæ ·æœ¬å·²ç»å¤„ç†å®Œæ¯•ï¼ˆå¿½ç•¥åä¸º123çš„å›¾ç‰‡ï¼‰ã€‚</p>
<p><img src="231119-2.png"></p>
<p><img src="231119-3.png"></p>
<p><img src="231119-4.png"></p>
<p><img src="231119-5.png"></p>
<p>ä¸Šå›¾ä¸­çš„<code>config.yaml</code>é…ç½®æ–‡ä»¶ä¸æ˜¯å‡­ç©ºè€Œæ¥çš„ã€‚</p>
<p>åŸºäºAnomalibä¸­å·²ç»æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œåªéœ€è¦åœ¨å®ƒåŸæœ‰çš„åŸºç¡€ä¸Šä¿®æ”¹å³å¯ã€‚</p>
<p>ä¿®æ”¹è¿‡ç¨‹å¯ä»¥ä¸æŒ‰å›¾æ“ä½œï¼Œæˆ‘åœ¨é…ç½®çš„æ—¶å€™å‘ç°å’Œè‡ªå¸¦çš„é…ç½®æ–‡ä»¶å·®åˆ«è¿˜æ˜¯æœ‰ç‚¹å¤§çš„ï¼Œè¿™é‡Œä¼š<strong>é™„åœ¨æœ€ä¸‹é¢</strong></p>
<p>å› æ­¤ä¸‹é¢çš„è¿‡ç¨‹<strong>ä½œä¸ºä»‹ç»ä½¿ç”¨</strong></p>
<p>å»å¤åˆ¶<code>anomalib-main\src\anomalib\models\patchcore\config.yaml</code>åˆ°è¯¥è·¯å¾„ä¸‹</p>
<p>åŸconfig.yamlä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<p><img src="231119-6.png"></p>
<p><strong>dataset</strong>éƒ¨åˆ†ä¿®æ”¹å¦‚ä¸‹ï¼Œå…¶ä¸­taskå¾ˆå…³é”®ï¼Œå®ƒå†³å®šäº†æ˜¯å¼‚å¸¸åˆ†ç±»è¿˜æ˜¯å¼‚å¸¸åˆ†å‰²ï¼Œä¸¤ç§æ¨¡å¼æ‰€éœ€è¦çš„é…ç½®ä¹Ÿä¸åŒ</p>
<p><img src="231119-7.png"></p>
<p><strong>metrics</strong>éƒ¨åˆ†æ³¨é‡Šæ‰ä¸­é—´çš„pixel</p>
<p><img src="231119-8.png"></p>
<p><strong>optimization</strong>éƒ¨åˆ†å°†export_modeè®¾ç½®ä¸ºonnxï¼Œè¿™æ­¥å°±æ˜¯å°†è®­ç»ƒåå°†è¿™äº›æ¡†æ¶çš„æ¨¡å‹ç»Ÿä¸€è½¬ä¸ºONNXå­˜å‚¨</p>
<p><img src="231119-9.png"></p>
<p>æœ€åä¿å­˜</p>
<p>config.yamlæ–‡ä»¶å…¨æ–‡å¦‚ä¸‹ï¼Œç›´æ¥ç²˜è´´å¯ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">111</span><br><span class="line"></span><br><span class="line">222</span><br><span class="line"></span><br><span class="line">333</span><br><span class="line"></span><br><span class="line">444</span><br><span class="line"></span><br><span class="line">555</span><br><span class="line"></span><br><span class="line">666</span><br><span class="line"></span><br><span class="line">777</span><br><span class="line"></span><br><span class="line">888</span><br><span class="line"></span><br><span class="line">999</span><br></pre></td></tr></table></figure>

<h3 id="è¿è¡Œå‰å‡†å¤‡"><a href="#è¿è¡Œå‰å‡†å¤‡" class="headerlink" title="è¿è¡Œå‰å‡†å¤‡"></a>è¿è¡Œå‰å‡†å¤‡</h3><p>ä¸ºäº†æ›´å¥½çš„è¿›è¡Œè°ƒè¯•ï¼Œè¿™é‡Œå®‰è£…jupyter notebookï¼Œåœ¨è¿™é‡Œçœ‹<del>æŠ¥é”™</del>æ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<p>åœ¨è™šæ‹Ÿç¯å¢ƒæ‰§è¡Œ</p>
<p><code>pip install jupyte</code></p>
<p>ç­‰å¾…å®‰è£…å®Œæˆåå†æ‰§è¡Œ</p>
<p><code>jupyter notebook</code></p>
<p>ï¼ˆè¿™é‡Œä½ éœ€è¦æå‰åœ¨è™šæ‹Ÿç¯å¢ƒä¸­cdåˆ°ä»£ç ç›®å½•ï¼Œjupyter notebookæ‰“å¼€çš„ç›®å½•å°±æ˜¯ä½ å½“å‰çš„å·¥ä½œç›®å½•ï¼Œå¦‚æœä½ çš„è™šæ‹Ÿç¯å¢ƒå°±åœ¨ä»£ç æ–‡ä»¶ä¸­å°±æ— æ‰€è°“äº†ï¼‰</p>
<p>å°±ä¼šåœ¨ä½ çš„Browserä¸­æ‰“å¼€å¦‚ä¸‹ç•Œé¢ï¼Œç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªNoteBook</p>
<p><img src="231119-10.png"></p>
<p><img src="231119-11.png"></p>
<p>å…ˆæŠŠåŒ…å¯¼è¿›å»ï¼Œè¾“å…¥ï¼ŒShift + Enterå¯ä»¥æ‰§è¡Œå½“å‰ä»£ç å—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%load_ext autoreload</span><br><span class="line">%autoreload 2</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>

<p><img src="231119-12.png"></p>
<p>å†è¾“å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import collections</span><br><span class="line">import shutil</span><br><span class="line">import tempfile</span><br><span class="line">import zipfile</span><br><span class="line">from pathlib import Path</span><br><span class="line">from typing import Tuple</span><br><span class="line"></span><br><span class="line">import cv2</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from anomalib.config import get_configurable_parameters</span><br><span class="line">from anomalib.data import get_datamodule</span><br><span class="line">from anomalib.data.inference import InferenceDataset</span><br><span class="line">from anomalib.models import get_model</span><br><span class="line">from anomalib.models.patchcore.lightning_model import PatchcoreLightning</span><br><span class="line">from anomalib.post_processing.post_process import compute_mask</span><br><span class="line">from anomalib.utils.callbacks import get_callbacks</span><br><span class="line">from anomalib.utils.loggers import get_experiment_logger</span><br><span class="line">from pytorch_lightning import Trainer, seed_everything</span><br><span class="line">from skimage.morphology import dilation</span><br><span class="line">from skimage.segmentation import find_boundaries</span><br><span class="line">from torch.utils.data import DataLoader</span><br></pre></td></tr></table></figure>

<p><img src="231119-13.png"></p>
<p>è¿™ä¸ªå›¾ä¸­æ˜¾ç¤ºä¸€äº›åŒ…æ²¡æœ‰å®‰è£…ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿èµ·è§åœ¨è¿™ä¹‹å‰å·²ç»æŠŠåŒ…çš„å®‰è£…æå‰åˆ°æœ€å‰é¢å»äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¸ç”¨ç®¡ï¼ˆæ³¨æ„ï¼šå¦‚æœè¦åœ¨jupyter notebookä¸­ä½¿ç”¨pipå‘½ä»¤éœ€è¦åœ¨æœ€å‰é¢åŠ ä¸€ä¸ªæ„Ÿå¹å·ï¼‰</p>
<p>ç„¶åé…ç½®ä¸€ä¸‹configçš„è·¯å¾„ï¼ˆä½ å¦‚æœè‡ªå·±æŒ‡å®šè¿™é‡Œçš„å€¼å°±éœ€è¦ä¿®æ”¹äº†ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATCHCORE_CONFIG_PATH = &quot;datasets/LeatherSet/patchcore/config.yaml&quot;</span><br></pre></td></tr></table></figure>

<p><img src="231119-14.png"></p>
<p>å†è¿›è¡Œä¸€ä¸‹åŸºæœ¬é…ç½®ï¼Œwarningä¸å¿…ç†ä¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">config = get_configurable_parameters(</span><br><span class="line">    model_name=&quot;patchcore&quot;, config_path=PATCHCORE_CONFIG_PATH</span><br><span class="line">)</span><br><span class="line">if config.project.seed:</span><br><span class="line">    seed_everything(config.project.seed)</span><br><span class="line"></span><br><span class="line">datamodule = get_datamodule(config)</span><br><span class="line">model = get_model(config)</span><br><span class="line">experiment_logger = get_experiment_logger(config)</span><br><span class="line">callbacks = get_callbacks(config)</span><br></pre></td></tr></table></figure>

<p><img src="231119-15.png"></p>
<p>æœ€åå°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trainer = Trainer(**config.trainer, logger=experiment_logger, callbacks=callbacks)</span><br><span class="line">trainer.fit(model=model, datamodule=datamodule)</span><br></pre></td></tr></table></figure>

<p><img src="231119-16.png"></p>
<h3 id="æ¨ç†"><a href="#æ¨ç†" class="headerlink" title="æ¨ç†"></a>æ¨ç†</h3><p>è®­ç»ƒå®Œæˆåï¼Œåœ¨å¯¹åº”æ•°æ®é›†çš„run/weightæ–‡ä»¶å¤¹ä¸‹åº”è¯¥æœ‰ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œè€Œåœ¨oonxæ–‡ä»¶å¤¹ä¸‹åˆåº”è¯¥åˆä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«è§å›¾</p>
<p><img src="231119-17.png"></p>
<p><img src="231119-18.png"></p>
<p>å›åˆ°æ•°æ®é›†æ–‡ä»¶å¤¹ï¼Œæ–°å»ºä¸€ä¸ªtestæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾å…¥éœ€è¦æ¨ç†çš„å›¾ç‰‡</p>
<p><img src="231119-19.png"></p>
<p>ç„¶åå›åˆ°ç»ˆç«¯ï¼ŒCtrl+Cé€€å‡ºjupyter notebookæ¨¡å¼ï¼Œæ‰§è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python tools/inference/openvino_inference.py --weights results/patchcore/LeatherSet/run/weights/onnx/model.onnx --metadata results/patchcore/LeatherSet/run/weights/onnx/metadata.json  --input datasets/LeatherSet/test/  --output results/patchcore/LeatherSet/run/images --task classification</span><br></pre></td></tr></table></figure>

<p>ä»¥è¿›è¡Œæ¨ç†ï¼Œè¿è¡Œå®Œåçš„ç»“æœä¼šåœ¨<code>anomalib-main\results\patchcore\LeatherSet\run\images\test</code>æ–‡ä»¶å¤¹ä¸­</p>
<p><img src="231119-20.png"></p>
<p><img src="231119-21.png"></p>
<p>æ­£æ ·æœ¬æ•°é‡è¶Šå¤§æ•ˆæœè¶Šå¥½ï¼Œè¿™ä¸ªç»“æœè¿˜å¹¶ä¸æ˜¯ååˆ†å®Œç¾ï¼Œæœ€å³è¾¹ä¸¤å¼ å›¾æ˜¯å¼‚å¸¸å›¾ï¼Œè®­ç»ƒå‡ºæ¥çš„æ¨¡å‹ä¹Ÿå¯Ÿè§‰åˆ°ä¸€ç‚¹å¼‚å¸¸ï¼Œä½†è¿˜æ˜¯åˆ†ç±»ä¸ºæ­£å¸¸ã€‚</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼ˆå’Œä¸Šé¢æ¯”åªå¤šäº†æœ€åä¸€ä¸ªå‚æ•°ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python tools/inference/openvino_inference.py --weights results/patchcore/LeatherSet/run/weights/onnx/model.onnx --metadata results/patchcore/LeatherSet/run/weights/onnx/metadata.json  --input datasets/LeatherSet/test/  --output results/patchcore/LeatherSet/run/images --task classification --visualization_mode full</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¼šæ˜¾ç¤ºä¸‰ä¸ªå›¾ï¼ŒåŒ…æ‹¬åŸå›¾ã€é¢„æµ‹çƒ­åº¦å›¾ä»¥åŠé¢„æµ‹ç»“æœå›¾ã€‚</p>
<p><img src="231119-22.png"></p>
<br>

<p>Endâ€¦</p>

        </div>

        
        <section class="post-tags">
            <div>
                <span>Tag:</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E7%AC%94%E8%AE%B0/"># ç¬”è®°</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">Back</a>
                <span>Â· </span>
                <a href="/">Home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2023/10/12/231012/">ç±³ç³»åˆ‡æ¢4G</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>ğŸ™„ 
    </div>
</footer>

    </div>
</body>
</html>

   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/fireworks.js"></script>