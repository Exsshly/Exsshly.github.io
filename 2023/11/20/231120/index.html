<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="description" content="庭院深深深几许">



<title>pip换源 | 游园不值</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">游园不值</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">游园不值</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">pip换源</h1>
            
                <div class="post-meta">
                    

                    
                        <span class="post-time">
                        Date: <a href="#">2023-11-20&nbsp;&nbsp;19:27:26</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <p>下面的东西其实有些长，不折腾的Windows直接无脑方案一或方案二即可，别的什么都不用看。</p>
<p>先放几个源</p>
<p>官方源：</p>
<p><code>https://pypi.python.org/simple</code></p>
<p>清华源(完全度和速度都很好，是一个不错的选择)：</p>
<p><code>https://pypi.tuna.tsinghua.edu.cn/simple/</code></p>
<p>北外源(有人给我推荐，但是没用过，就也写在这里)：</p>
<p><code>https://mirrors.bfsu.edu.cn/pypi/web/simple/</code></p>
<p>阿里云(完全度和速度较好，但不如清华源)：</p>
<p><code>http://mirrors.aliyun.com/pypi/simple/</code></p>
<p>豆瓣源(速度较快，但是完全度有限)：</p>
<p><code>http://pypi.douban.com/simple/</code></p>
<p>网易源(速度比较快，但是完全度有限)：<br><code>https://mirrors.163.com/pypi/simple/ </code></p>
<p>中科大源(速度较快，但完全度不如前面几个镜像源)：</p>
<p><code>http://pypi.mirrors.ustc.edu.cn/simple/</code></p>
<p>百度云(速度较快，但是完全度也有限)：</p>
<p><code>https://mirror.baidu.com/pypi/simple/</code></p>
<p>华为云(完全度和速度均中等)：</p>
<p><code>https://mirrors.huaweicloud.com/repository/pypi/simple/</code></p>
<p>腾讯云(速度一般，完全度也一般)：</p>
<p><code>https://mirrors.cloud.tencent.com/pypi/simple/</code></p>
<p>查看当前源则执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config list</span><br></pre></td></tr></table></figure>

<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><h3 id="方案〇"><a href="#方案〇" class="headerlink" title="方案〇"></a>方案〇</h3><p>此方案为临时解决方案，下面方案一、二是永久方案。</p>
<p>在pip安装时，尾部加入参数 <code>-i</code> 即可，例如安装numpy包，只需要执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install numpy -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<p>即在本次安装使用清华源，以后的安装不带参数依然使用系统自带源，后面的清华源可以换成别的源，在后面会写出几个源的地址。</p>
<p>END.</p>
<h3 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h3><p>在<code>C:\Users\usr</code>目录下新建文件夹<code>pip</code>，其中<strong>usr</strong>是你自己的用户名，然后在新建的文件夹下再新建文件<strong>pip.ini</strong>，注意后缀一定是<strong>ini</strong>，可用记事本等编辑器打开。</p>
<p>然后在ini文件里添加以下内容（直接换成了清华源）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<p>END.</p>
<h3 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h3><p>直接在命令行（或终端）里执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<p>PS：此方式也适用于Linux</p>
<p>END.</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>其实方案一、二的基本原理都是一样的。区别在于：</p>
<p>方案一是手动建立的pip文件中，文件建立在 <code>C:\Users\usr\pip\pip.ini</code> 中。</p>
<p>而方案二是命令行自己生成上面的文件夹，不过却建立在 <code>C:\Users\Fx\AppData\Roaming\pip\pip.ini</code> 中，两者的路径不同。</p>
<p>实际操作下来，在我的其中一个设备下使用方案一是可行的，换在工作设备上方案一却无法正确切换到国内源，因此有了方案二。</p>
<p>总的来说，如果方案一没有用就直接上方案二，方案二最彻底。</p>
<p>这种配置方案应对大部分情况是足够的，但有时候由于国内源更新不及时或者其他原因仍需要官方源进行安装，所以这里就需要按照方案〇中临时使用官方源，依然是安装numpy，则执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install numpy -i https://pypi.python.org/simple</span><br></pre></td></tr></table></figure>

<p>至于配置多个<strong>镜像源</strong>，后面会提及。</p>
<p>另外如果换源后pip安装时出现如不信任的源类似的不信任提示，则在方案一或者方案二的pip.ini文件配置中替换为下面字段（这里只是提示，换源后不一定会出现这个问题），下面提供两种写法（另外下面都是清华源的写法，因为这里<strong>只推荐清华源</strong>，如果有其他源的需求，trusted项按照清华园的删除后面的simple字段，或者直接划到最后配置多源中复制你需要的那一行）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line">[install]</span><br><span class="line">trusted-host = pypi.tuna.tsinghua.edu.cn</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">trusted-host = pypi.tuna.tsinghua.edu.cn</span><br></pre></td></tr></table></figure>

<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="方案一-1"><a href="#方案一-1" class="headerlink" title="方案一"></a>方案一</h3><p>使用vim/vi编辑配置文件，路径在 <code>~/.pip/pip.conf</code></p>
<p>添加以下内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url =  http://mirrors.aliyun.com/pypi/simple/ </span><br></pre></td></tr></table></figure>

<p>PS：该方法永久换源，临时换源参Windows中方案〇。</p>
<p>END.</p>
<h3 id="方案二-1"><a href="#方案二-1" class="headerlink" title="方案二"></a>方案二</h3><p>同Windows方案二。</p>
<p>END.</p>
<h2 id="添加多个源"><a href="#添加多个源" class="headerlink" title="添加多个源"></a>添加多个源</h2><p>添加多个源不能只靠一条命令了，因此看到这里的默认你已经很了解配置文件的问题。</p>
<p>如果不是，还是建议使用上面配置永久源+使用-i字段临时使用官方源的方案。</p>
<p>添加多个源在使用pip安装时可以依次轮训各个源，下面是添加多个源的记录。</p>
<p>Linux需要修改pip.conf文件，Windows中你需要定位到是用户目录下（C:\Users\usr\pip）还是系统目录下（C:\Users\Fx\AppData\Roaming\pip）的配置文件，然后像下面修改ini文件，下面提供两种写法，任选一种</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">extra-index-url =</span><br><span class="line">            https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">            https://mirror.baidu.com/pypi/simple/</span><br><span class="line">            https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line">            https://mirrors.cloud.tencent.com/pypi/simple</span><br><span class="line"></span><br><span class="line">[install]</span><br><span class="line">trusted-host =</span><br><span class="line">    pypi.tuna.tsinghua.edu.cn</span><br><span class="line">    mirrors.aliyun.com</span><br><span class="line">    mirror.baidu.com</span><br><span class="line">    pypi.mirrors.ustc.edu.cn</span><br><span class="line">    mirrors.cloud.tencent.com</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url=https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">extra-index-url=http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">extra-index-url=http://pypi.douban.com/simple</span><br><span class="line">extra-index-url=http://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line"></span><br><span class="line">[install]</span><br><span class="line">trusted-host=pypi.tuna.tsinghua.edu.cn</span><br><span class="line">trusted-host=mirrors.aliyun.com</span><br><span class="line">trusted-host=pypi.douban.com</span><br><span class="line">trusted-host=pypi.mirrors.ustc.edu.cn</span><br></pre></td></tr></table></figure>

<p>END.</p>
<h2 id="番外"><a href="#番外" class="headerlink" title="番外"></a>番外</h2><p>在使用pip安装Python库时，如果之前已经下载过该库，pip会默认使用缓存来安装库，而不是重新从网络上下载。</p>
<p>但是时间久了不清理缓存就会很大，而且旧版本的库以后再也不会派上用场，何况现在网速如此之快，为什么不重新下载呢？</p>
<p>所以这里提供清除pip缓存的方法。</p>
<p>对于Linux，缓存在 <code>~/.cache/pip</code> 目录下；</p>
<p>对于Windows，缓存则在 <code>C:\Users\usr\AppData\Local\pip\Cache</code> 目录下</p>
<p>可以直接手动删除这两个文件夹，当然也可以通过终端执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip cache purge</span><br></pre></td></tr></table></figure>

<p>来删除，<strong>这个命令会清除所有缓存，包括已下载但未安装的软件包和已安装但未被使用的缓存</strong>。</p>
<p>或者可以通过</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip cache remove package-name</span><br></pre></td></tr></table></figure>

<p>来删除指定软件包的缓存，其中 <code>package-name</code> 是想要清除缓存的软件包的名称。</p>

        </div>

        
        <section class="post-tags">
            <div>
                <span>Tag:</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E6%8A%80%E5%B7%A7/"># 技巧</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">Back</a>
                <span>· </span>
                <a href="/">Home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2023/11/19/231119/">Anomalib安装和使用</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>🙄 
    </div>
</footer>

    </div>
</body>
</html>

   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/fireworks.js"></script>